@page "/users"
@using Aurora.Features.User.GetUsers
@using Aurora.Interfaces
@using MediatR

@inject IMediator mediator;

<h4>Customers</h4>
<hr />
<table cellpadding="0" cellspacing="0" class="table">
    <tr>
        <th>Id</th>
        <th>Username</th>
        <th>Email</th>
    </tr>
    @foreach (var user in Model)
    {
        <tr>
            <td>@user.Id</td>
            <td>@user.Name</td>
            <td>@user.Email</td>
        </tr>
    }
</table>

@code {
    private IList<UserRecord> Model { get; set; } = new List<UserRecord>();
    protected override async Task OnInitializedAsync()
    {

        var response = await mediator.Send(new GetUsersQuery());
        if (response.Success)
        {
            Model = response.Users;
        }
    }
}
